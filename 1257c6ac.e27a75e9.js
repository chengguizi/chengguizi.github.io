(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{140:function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return d}));var r=a(0),n=a.n(r);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=n.a.createContext({}),p=function(e){var t=n.a.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},m=function(e){var t=p(e.components);return n.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},b=n.a.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),m=p(a),b=r,d=m["".concat(i,".").concat(b)]||m[b]||u[b]||o;return a?n.a.createElement(d,l(l({ref:t},s),{},{components:a})):n.a.createElement(d,l({ref:t},s))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=b;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=a[s];return n.a.createElement.apply(null,i)}return n.a.createElement.apply(null,a)}b.displayName="MDXCreateElement"},61:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return l})),a.d(t,"rightToc",(function(){return c})),a.d(t,"default",(function(){return p}));var r=a(2),n=a(6),o=(a(0),a(140)),i={hide_title:!0,sidebar_label:"Mount Image as Loopback"},l={unversionedId:"hardware/jetson/mount-image-as-loopback",id:"hardware/jetson/mount-image-as-loopback",isDocsHomePage:!1,title:"mount-image-as-loopback",description:"Mount .img.raw as Read-write Loopback Device",source:"@site/docs/hardware/jetson/mount-image-as-loopback.md",permalink:"/docs/hardware/jetson/mount-image-as-loopback",editUrl:"https://github.com/chengguizi/chengguizi.github.io/docs/hardware/jetson/mount-image-as-loopback.md",lastUpdatedAt:1597829776,sidebar_label:"Mount Image as Loopback",sidebar:"tx2Sidebar",previous:{title:"backup-procedures",permalink:"/docs/hardware/jetson/backup-procedures"},next:{title:"tx2-post-flashing",permalink:"/docs/hardware/jetson/tx2-post-flashing"}},c=[{value:"Regarding Sparse Image (*.img.raw)",id:"regarding-sparse-image-imgraw",children:[]}],s={rightToc:c};function p(e){var t=e.components,a=Object(n.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},s,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h1",{id:"mount-imgraw-as-read-write-loopback-device"},"Mount ",Object(o.b)("inlineCode",{parentName:"h1"},".img.raw")," as Read-write Loopback Device"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Example to setup the image file as loopback device, without mounting",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"sudo losetup /dev/loop17 xxx.img.raw")))),Object(o.b)("li",{parentName:"ul"},"Example to check disk integrity",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"sudo fsck.ext4 -f /dev/loop17")))),Object(o.b)("li",{parentName:"ul"},"Example to mount the loopback device, with read-write permissions",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"sudo mount /dev/loop17 /mnt/loopback/")))),Object(o.b)("li",{parentName:"ul"},"Remember to ",Object(o.b)("inlineCode",{parentName:"li"},"sync")," before you umount"),Object(o.b)("li",{parentName:"ul"},"Example to umount",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"sudo umount /dev/loop17")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"sudo losetup -d /dev/loop17"))))),Object(o.b)("h2",{id:"regarding-sparse-image-imgraw"},"Regarding Sparse Image (*.img.raw)"),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},'Historically there was not always a sparse (compressed image), but due to how long it took to copy over USB2 the sparse image had support added. Prior to sparse images the flash program just used the raw image directly. The current flash program can still use an uncompressed/raw image. The order of dealing with flash images is that "bootloader/system.img" is created; this is then moved to "bootloader/system.img.raw", and then system.img.raw is used to compress into system.img. flash.sh does not care if system.img is raw or sparse, it works. (',Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://devtalk.nvidia.com/default/topic/1009158/jetson-tx2/cloning-or-taking-snapshot-of-tx2-board/"}),"post"),")")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"To make the sparse .img out of .img.raw, use the following command",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"./mksparse -v --fillpattern=0 system.img.raw system.img"))))))}p.isMDXComponent=!0}}]);